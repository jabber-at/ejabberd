--- a/ejabberd.init.template
+++ b/ejabberd.init.template
@@ -1,4 +1,7 @@
 #! /bin/sh
+#
+# ejabberd        Start/stop ejabberd server
+#
 
 ### BEGIN INIT INFO
 # Provides:          ejabberd
@@ -16,18 +19,23 @@
 
 set -o errexit
 
-DIR=@ctlscriptpath@
+DIR=/usr/sbin
 CTL="$DIR"/ejabberdctl
 USER=@installuser@
 
-test -x "$CTL" || {
-	echo "ERROR: ejabberd not found: $DIR"
+# Include ejabberd defaults if available
+if [ -f /etc/default/ejabberd ] ; then
+    . /etc/default/ejabberd
+fi
+
+if [ ! -x "$CTL" ]; then
+	echo "ERROR: $CTL: File not found or not executeable."
 	exit 1
-}
-grep ^"$USER": /etc/passwd >/dev/null || {
-	echo "ERROR: System user not found: $USER"
+fi
+if [ $(grep -c ^"$USER": /etc/passwd) -ne 1 ]; then
+	echo "ERROR: System user not found: $USER."
 	exit 2
-}
+fi
 
 export PATH="${PATH:+$PATH:}/usr/sbin:/sbin"
 
