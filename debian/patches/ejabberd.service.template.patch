Description: populate ejabberd.service.template
 Turn the service template into an actual service file for systemd
Author: Mathias Ertl <mati@jabber.at>

--- a/ejabberd.service.template
+++ b/ejabberd.service.template
@@ -1,6 +1,7 @@
 [Unit]
-Description=XMPP Server
-After=network.target
+Description=A distributed, fault-tolerant Jabber/XMPP server
+After=epmd.service network.target
+Requires=epmd.service
 
 [Service]
 Type=forking
@@ -11,8 +12,10 @@
 RestartSec=5
 ExecStart=/bin/sh -c '@ctlscriptpath@/ejabberdctl start && @ctlscriptpath@/ejabberdctl started'
 ExecStop=/bin/sh -c '@ctlscriptpath@/ejabberdctl stop && @ctlscriptpath@/ejabberdctl stopped'
+PIDFile=/run/ejabberd/ejabberd.pid
 PrivateDevices=true
 ProtectSystem=full
 
 [Install]
 WantedBy=multi-user.target
+Alias=ejabberd.service
