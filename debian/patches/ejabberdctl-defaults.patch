--- a/ejabberdctl.template
+++ b/ejabberdctl.template
@@ -47,7 +47,8 @@
         --node) ERLANG_NODE_ARG=$1 ; shift ;;
         --config-dir) ETCDIR=$1 ; shift ;;
         --config) EJABBERD_CONFIG_PATH=$1 ; shift ;;
-        --ctl-config) EJABBERDCTL_CONFIG_PATH=$1 ; shift ;;
+        --default) EJABBERDCTL_CONFIG_PATH=$1 ; shift ;;
+        --default-dir) DEFAULTDIR=$1 ; shift ;;
         --logs) LOGS_DIR=$1 ; shift ;;
         --spool) SPOOLDIR=$1 ; shift ;;
         *) ARGS="$ARGS $PARAM" ;;
@@ -58,8 +59,11 @@
 if [ "$ETCDIR" = "" ] ; then
     ETCDIR={{sysconfdir}}/ejabberd
 fi
+if [ "$DEFAULTDIR" = "" ] ; then
+    DEFAULTDIR={{sysconfdir}}/default
+fi
 if [ "$EJABBERDCTL_CONFIG_PATH" = "" ] ; then
-    EJABBERDCTL_CONFIG_PATH=$ETCDIR/ejabberdctl.cfg
+    EJABBERDCTL_CONFIG_PATH=$DEFAULTDIR/ejabberd
 fi
 if [ -f "$EJABBERDCTL_CONFIG_PATH" ] ; then
     . "$EJABBERDCTL_CONFIG_PATH"
@@ -166,23 +170,24 @@
 # attach to server
 debug()
 {
-    echo "--------------------------------------------------------------------"
-    echo ""
-    echo "IMPORTANT: we will attempt to attach an INTERACTIVE shell"
-    echo "to an already running ejabberd node."
-    echo "If an ERROR is printed, it means the connection was not successful."
-    echo "You can interact with the ejabberd node if you know how to use it."
-    echo "Please be extremely cautious with your actions,"
-    echo "and exit immediately if you are not completely sure."
-    echo ""
-    echo "To detach this shell from ejabberd, press:"
-    echo "  control+c, control+c"
-    echo ""
-    echo "--------------------------------------------------------------------"
-    echo "To bypass permanently this warning, add to ejabberdctl.cfg the line:"
-    echo "  EJABBERD_BYPASS_WARNINGS=true"
-    echo "Press any key to continue"
     if [ "$EJABBERD_BYPASS_WARNINGS" != "true" ] ; then
+        echo "--------------------------------------------------------------------"
+        echo ""
+        echo "IMPORTANT: we will attempt to attach an INTERACTIVE shell"
+        echo "to an already running ejabberd node."
+        echo "If an ERROR is printed, it means the connection was not successful."
+        echo "You can interact with the ejabberd node if you know how to use it."
+        echo "Please be extremely cautious with your actions,"
+        echo "and exit immediately if you are not completely sure."
+        echo ""
+        echo "To detach this shell from ejabberd, press:"
+        echo "  control+c, control+c"
+        echo ""
+        echo "--------------------------------------------------------------------"
+        echo "To bypass permanently this warning, add to $EJABBERDCTL_CONFIG_PATH the line:"
+        echo "  EJABBERD_BYPASS_WARNINGS=true"
+        echo "Press any key to continue"
+
         read foo
     fi
     echo ""
@@ -199,22 +204,23 @@
 live()
 {
     check_start
-    echo "--------------------------------------------------------------------"
-    echo ""
-    echo "IMPORTANT: ejabberd is going to start in LIVE (interactive) mode."
-    echo "All log messages will be shown in the command shell."
-    echo "You can interact with the ejabberd node if you know how to use it."
-    echo "Please be extremely cautious with your actions,"
-    echo "and exit immediately if you are not completely sure."
-    echo ""
-    echo "To exit this LIVE mode and stop ejabberd, press:"
-    echo "  q().  and press the Enter key"
-    echo ""
-    echo "--------------------------------------------------------------------"
-    echo "To bypass permanently this warning, add to ejabberdctl.cfg the line:"
-    echo "  EJABBERD_BYPASS_WARNINGS=true"
-    echo "Press any key to continue"
     if [ "$EJABBERD_BYPASS_WARNINGS" != "true" ] ; then
+        echo "--------------------------------------------------------------------"
+        echo ""
+        echo "IMPORTANT: ejabberd is going to start in LIVE (interactive) mode."
+        echo "All log messages will be shown in the command shell."
+        echo "You can interact with the ejabberd node if you know how to use it."
+        echo "Please be extremely cautious with your actions,"
+        echo "and exit immediately if you are not completely sure."
+        echo ""
+        echo "To exit this LIVE mode and stop ejabberd, press:"
+        echo "  q().  and press the Enter key"
+        echo ""
+        echo "--------------------------------------------------------------------"
+        echo "To bypass permanently this warning, add to $EJABBERDCTL_CONFIG_PATH the line:"
+        echo "  EJABBERD_BYPASS_WARNINGS=true"
+        echo "Press any key to continue"
+
         read foo
     fi
     echo ""
@@ -245,7 +251,8 @@
     echo "Optional parameters when starting an ejabberd node:"
     echo "  --config-dir dir   Config ejabberd:    $ETCDIR"
     echo "  --config file      Config ejabberd:    $EJABBERD_CONFIG_PATH"
-    echo "  --ctl-config file  Config ejabberdctl: $EJABBERDCTL_CONFIG_PATH"
+    echo "  --default file     Config ejabberdctl: $EJABBERDCTL_CONFIG_PATH"
+    echo "  --default-dir      Config ejabberdctl:  $DEFAULTDIR"
     echo "  --logs dir         Directory for logs: $LOGS_DIR"
     echo "  --spool dir        Database spool dir: $SPOOLDIR"
     echo "  --node nodename    ejabberd node name: $ERLANG_NODE"
