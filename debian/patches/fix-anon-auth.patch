Description: fix anon auth
 A patch from upstream to fix anonymous authentication.
Author: Pawe≈Ç Chmielowski <pchmielowski@process-one.net>
Source: https://github.com/processone/ejabberd/commit/d5c29360fb627c8441cc5be86cce05e4f186c0a7
Applied-upstream: 16.03+1

---
 src/cyrsasl_anonymous.erl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/cyrsasl_anonymous.erl b/src/cyrsasl_anonymous.erl
index 2b2a9f6..6aea278 100644
--- a/src/cyrsasl_anonymous.erl
+++ b/src/cyrsasl_anonymous.erl
@@ -49,5 +49,5 @@ mech_step(#state{server = Server} = S, ClientIn) ->
                              randoms:get_string()]),
     case ejabberd_auth:is_user_exists(User, Server) of
         true  -> mech_step(S, ClientIn);
-        false -> {ok, [{username, User}, {auth_module, ejabberd_auth_anonymous}]}
+        false -> {ok, [{username, User}, {authzid, User}, {auth_module, ejabberd_auth_anonymous}]}
     end.
